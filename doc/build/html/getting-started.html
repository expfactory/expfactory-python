



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started &mdash; expfactory 0.0.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
    <link rel="top" title="expfactory 0.0.1 documentation" href="index.html"/>
        <link rel="next" title="Integrations" href="integrations.html"/>
        <link rel="prev" title="expfactory package" href="expfactory.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> expfactory
          

          
            
            <img src="_static/psiturkpy_blue.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Tools Available</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#i-want-to-generate-a-custom-battery">I want to generate a custom battery</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-choose-a-deployment">How do I choose a deployment?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#battery-generation">Battery Generation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#install-psiturk">0. Install psiturk</a></li>
<li class="toctree-l4"><a class="reference internal" href="#install-expfactory-python">1. Install expfactory-python</a></li>
<li class="toctree-l4"><a class="reference internal" href="#web-interface-to-design-experiment">2. Web interface to design experiment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#the-experiment-factory-web-interface">The Experiment Factory Web Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#a-collection-of-experiment-details">A. Collection of experiment details</a></li>
<li class="toctree-l4"><a class="reference internal" href="#b-database-connection-parameters">B. Database connection parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#c-deployment">C. Deployment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#d-experiment-selection">D. Experiment selection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vagrant-deployment">Vagrant Deployment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-a-local-vm">Setting up a local VM</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deployment-to-aws">Deployment to AWS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#i-want-to-view-or-test-available-experiments">I want to view or test available experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#i-want-to-contribute-an-experiment">I want to contribute an experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#i-want-to-learn-about-the-expfactory-python-functions">I want to learn about the expfactory-python functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/expfactory">GitHub repository</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">expfactory</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Getting Started</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/getting-started.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="i-want-to-generate-a-custom-battery">
<h2>I want to generate a custom battery<a class="headerlink" href="#i-want-to-generate-a-custom-battery" title="Permalink to this headline">¶</a></h2>
<p>You can generate a battery, meaning a psiturk experiment folder that may include a selection of experiments, on your local machine, a virtual (vagrant) machine, or a cloud (Amazon Web Services) machine.</p>
<div class="section" id="how-do-i-choose-a-deployment">
<h3>How do I choose a deployment?<a class="headerlink" href="#how-do-i-choose-a-deployment" title="Permalink to this headline">¶</a></h3>
<p>If you already have psiturk configured on your local machine and basically want to produce a folder to run, then you should choose the &#8220;Folder&#8221; option for deployment. If you do not specify database parameters, the default is to generate a sqlite3 file (a static database file in the same folder as your experiment).</p>
<p>If you want to use psiturk but don&#8217;t want to install things on your local machine, a vagrant virtual machine would be appropriate. This means that you will ssh into the machine to &#8220;see&#8221; the folder with your experiment, and all required software and databases will be installed for you. The default IP address you will use to access the virtual machine in your browser is 192.128.0.20.</p>
<p>If you want a deployment that, for example, your lab could use to run many participants at once, you might want to set up psiturk on the cloud, for example, an Amazon Web Services EC2 Instance. If this is this case, we <em>strongly</em> recommend that you do not use the &#8220;default&#8221; database option, as it could compromise your data - you should enter the database parameters for a secure database that you create.</p>
</div>
<div class="section" id="battery-generation">
<h3>Battery Generation<a class="headerlink" href="#battery-generation" title="Permalink to this headline">¶</a></h3>
<p>A battery of experiments is a selection of experimental paradigms that are presented in sequence. In the psiturk experiment infrastructure, a battery would coincide with a single folder that contains a custom setup to run many different tasks for a single HIT. We have made it easy to select one or more experiments from <a class="reference external" href="http://www.github.com/expfactory/expfactory-experiments">http://www.github.com/expfactory/expfactory-experiments</a>, merge them into a <a class="reference external" href="http://www.github.com/expfactory/expfactory-battery">expfactory battery</a>, and deploy in a <a class="reference external" href="http://www.github.com/expfactory/expfactory-vm">virtual machine</a>.</p>
<div class="section" id="install-psiturk">
<h4>0. Install psiturk<a class="headerlink" href="#install-psiturk" title="Permalink to this headline">¶</a></h4>
<p>Before getting started, you should familiarize yourself with [psiturk](<a class="reference external" href="https://psiturk.org/quick_start/">https://psiturk.org/quick_start/</a>). Likely you will be interested in setting up an experiment on your local machine, and so you should follow the installation instructions and go through the entire demo to make sure things are working properly.</p>
</div>
<div class="section" id="install-expfactory-python">
<h4>1. Install expfactory-python<a class="headerlink" href="#install-expfactory-python" title="Permalink to this headline">¶</a></h4>
<p>expfactory-python is the controller of all pieces of this infrastructure. You can install it with pip:</p>
<div class="highlight-python"><div class="highlight"><pre>pip install git+git://github.com/expfactory/expfactory-python.git
</pre></div>
</div>
<p>This will install the module so that you can use its functions in your own scripts, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">expfactory.battery</span> <span class="kn">import</span> <span class="n">generate</span>
</pre></div>
</div>
<p>and also place an executable, <cite>psyturkpy</cite> in your bin folder.</p>
</div>
<div class="section" id="web-interface-to-design-experiment">
<h4>2. Web interface to design experiment<a class="headerlink" href="#web-interface-to-design-experiment" title="Permalink to this headline">¶</a></h4>
<p>To run the executable to open up a web interface to design your experiment:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">expfactory</span>
</pre></div>
</div>
<p>You will see that it tells you that it is running at port 5000:</p>
<img alt="_images/0running.png" src="_images/0running.png" />
</div>
</div>
<div class="section" id="the-experiment-factory-web-interface">
<h3>The Experiment Factory Web Interface<a class="headerlink" href="#the-experiment-factory-web-interface" title="Permalink to this headline">¶</a></h3>
<p>This means that you should open your browser to <cite>localhost:5000</cite>. The web interface will take you through the following steps:</p>
<ul class="simple">
<li><ol class="first upperalpha">
<li>collection of experiment details</li>
</ol>
</li>
<li><ol class="first upperalpha" start="2">
<li>database connection parameters</li>
</ol>
</li>
<li><ol class="first upperalpha" start="3">
<li>selection of local (folder) experiment, or deployment to AWS.</li>
</ol>
</li>
<li><ol class="first upperalpha" start="4">
<li>selection of experiments</li>
</ol>
</li>
</ul>
<div class="section" id="a-collection-of-experiment-details">
<h4>A. Collection of experiment details<a class="headerlink" href="#a-collection-of-experiment-details" title="Permalink to this headline">¶</a></h4>
<p>An experiment is controlled via a config.json file, in which you specify details of your experiment. Here we will collect those fields:</p>
<img alt="_images/1config.png" src="_images/1config.png" />
<p>All fields are required. Specifically:</p>
<ul class="simple">
<li>Title: should be the title of your experiment.</li>
<li>Description: should describe what your experiment is measuring, or its goals.</li>
<li>Keywords: should be lower-case, comma separated</li>
<li>Contact: should be a valid email for psiturk to contact <em>only on error</em></li>
<li>Organization Name: is typically your institution or university</li>
</ul>
</div>
<div class="section" id="b-database-connection-parameters">
<h4>B. Database connection parameters<a class="headerlink" href="#b-database-connection-parameters" title="Permalink to this headline">¶</a></h4>
<p>If you don&#8217;t know anything about databases, you should let expfactory set up the database for you. In the case of a local folder, this will mean an sqlite3 file. In the case of a virtual machine or cloud (AWS) deployment, expfactory will configure a mysql database on the same server.</p>
<img alt="_images/2database.png" src="_images/2database.png" />
<p>If you are testing, we recommend that you let expfactory set it up for you. For an actual deployment, and especially a cloud deployment, it is essential that you specify custom MySQL or Postgresql database parameters. Letting expfactory set up a cloud deployment means that the connection parameters are available for all to see, and this is a risk to your data and to the privacy of your participants.</p>
<p>Finally, we do not allow for the option of an sqlite3 database beyond a local folder, because sqlite3 can only handle one read/write at a time, and thus is only appropriate for single-user, local testing. When setting up a database, example parameters are shown below:</p>
<img alt="_images/2database2.png" src="_images/2database2.png" />
<p>Psiturkpy does not test these parameters for you.</p>
</div>
<div class="section" id="c-deployment">
<h4>C. Deployment<a class="headerlink" href="#c-deployment" title="Permalink to this headline">¶</a></h4>
<p>You have several deployment options, including a local folder, a virtual machine (vagrant), or a cloud deployment (Amazon Web Services, or AWS).</p>
<img alt="_images/3deployment.png" src="_images/3deployment.png" />
<p>Choosing &#8220;folder&#8221; will generate a local experiment, and either of the virtual machine options will produce a Vagrantfile that can be run to deploy the Virtual Machine. Specific instructions for a local vagrant or vagrant-aws are provided. Note that you can use the VagrantfileLocal or VagrantfileAWS file (renamed to Vagrantfile) as is from the <a class="reference external" href="http://www.github.com/expfactory/expfactory-vm">virtual machine</a> repo to generate a battery with all available, valid experiments.</p>
</div>
<div class="section" id="d-experiment-selection">
<h4>D. Experiment selection<a class="headerlink" href="#d-experiment-selection" title="Permalink to this headline">¶</a></h4>
<p>When you click &#8220;Next&#8221; on part C above, behind the scenes the battery and experiment folders are downloading, and the most updated set of experiments are run through a validator. In this experiment selection screen, you are presented with experiment folders from <a class="reference external" href="http://www.github.com/expfactory/expfactory-experiments">http://www.github.com/expfactory/expfactory-experiments</a> repo that pass validation:</p>
<img alt="_images/4experiments.png" src="_images/4experiments.png" />
<p>You can select as many or as few as you want, and they will be included in your custom battery. Note that in the future you will be able to select experiments based on task or concept from the <a class="reference external" href="http://www.cognitiveatlas.org">cognitive atlas</a>.</p>
<p>After experiment selection, your battery generation is complete, and the web interface will tell you where you can find the folder or Vagrantfile:</p>
<img alt="_images/5complete.png" src="_images/5complete.png" />
<p>In the case of a &#8220;folder&#8221; generation, you will see a standard psiturk experiment structure:</p>
<img alt="_images/6config.png" src="_images/6config.png" />
<p>We recommend you move this folder to where you would like to keep it, and then cd to the folder, and type <cite>psiturk</cite> to start the experiment. Note that this assumes that you have properly installed psiturk on your machine. If not, please return to <a class="reference external" href="https://psiturk.org/quick_start/">these instructions</a>.</p>
<p>In the case of a &#8220;vagrant&#8221; or &#8220;AWS&#8221; configuration, you will find a <cite>Vagrantfile</cite> in the output folder:</p>
<img alt="_images/5vagrantfile.png" src="_images/5vagrantfile.png" />
</div>
</div>
<div class="section" id="vagrant-deployment">
<h3>Vagrant Deployment<a class="headerlink" href="#vagrant-deployment" title="Permalink to this headline">¶</a></h3>
<p>One of the options is to produce a &#8220;Vagrantfile&#8221; for use on your local machine. This is ideal if you want to use psiturk locally, but don&#8217;t want to go through installation of the module or a database.</p>
<div class="section" id="setting-up-a-local-vm">
<h4>Setting up a local VM<a class="headerlink" href="#setting-up-a-local-vm" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ol class="arabic simple">
<li>Install VirtualBox from <a class="reference external" href="https://www.virtualbox.org/wiki/Downloads">https://www.virtualbox.org/wiki/Downloads</a></li>
<li>Install Vagrant from <a class="reference external" href="http://www.vagrantup.com/downloads">http://www.vagrantup.com/downloads</a>. Vagrant is a provisioning system that sets up the virtual machine.</li>
<li>If you don&#8217;t already have it, install git <a class="reference external" href="https://git-scm.com/downloads">https://git-scm.com/downloads</a></li>
<li>You have two options to produce your Vagrantfile. If you want a custom battery, then you should run the executable expfactory, generate the file, and copy it to a folder outside of a the temporary directory. If you want to generate a vagrant machine with all valid tasks available, then you can clone the expfactory-vm repo and use the file &#8220;VagrantfileLocal&#8221; renamed to &#8220;Vagrantfile.&#8221; Note that this is also the case for the AWS version (instructions below).</li>
</ol>
</div></blockquote>
<div class="highlight-python"><div class="highlight"><pre>cd myvagrantdirectory
git clone https://github.com/expfactory/expfactory-vm.git`
cd expfactory-vm
</pre></div>
</div>
<p>We are now in a directory with the Vagrantfile. You can set up the virtual machine:</p>
<div class="highlight-python"><div class="highlight"><pre>vagrant up
</pre></div>
</div>
<p>Note that this can take some time. Keep the lookout for red statements that may indicate an error. If you find an error please report it as an <a class="reference external" href="https://github.com/expfactory/expfactory-vm/issues">issue</a>.</p>
<img alt="_images/0vagrantup.png" src="_images/0vagrantup.png" />
<p>The above shows a successful build.</p>
<blockquote>
<div><ol class="arabic" start="5">
<li><p class="first">You can then log in with ssh</p>
<blockquote>
<div><p>vagrant ssh</p>
</div></blockquote>
</li>
</ol>
<blockquote>
<div><ol class="arabic simple" start="7">
<li>Your experiment is located in $HOME/expfactory-battery. The build files are in expfactory-build. Note that when you turn the server on and debug, you will need the -p option to make sure the machine does not attempt to open the link with a browser in the terminal.</li>
</ol>
</div></blockquote>
</div></blockquote>
<div class="highlight-python"><div class="highlight"><pre>cd $HOME/expfactory-battery
psiturk
server on
debug -p
</pre></div>
</div>
</div>
<div class="section" id="deployment-to-aws">
<h4>Deployment to AWS<a class="headerlink" href="#deployment-to-aws" title="Permalink to this headline">¶</a></h4>
<p>You can equivalently produce a Vagrantfile with the expfactory module that can be deployed to AWS. Some expertise is assumed, namely that you are familiar with the EC2 section of the <a class="reference external" href="http://console.aws.amazon.com">AWS console</a>. You will need to log in and create a security group, download a key, and fill in all variables required in the SCRIPT section of the Vagrantfile.</p>
<blockquote>
<div><ol class="arabic simple">
<li>Make sure you have the most up-to-date version of vagrant from <a class="reference external" href="https://www.vagrantup.com/downloads">https://www.vagrantup.com/downloads</a>, and install vagrant-aws. If you do not, you will see this error (version 1.6.5)</li>
</ol>
</div></blockquote>
<div class="highlight-python"><div class="highlight"><pre>vagrant-share can&#39;t be installed without vagrant login (RuntimeError)
</pre></div>
</div>
<p>And after updating:</p>
<div class="highlight-python"><div class="highlight"><pre>     vagrant --version
     Vagrant 1.7.2


2. Then you should install vagrant-aws, which will allow you to provision the Amazon machine.
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>sudo vagrant plugin install vagrant-aws
Installing the &#39;vagrant-aws&#39; plugin. This can take a few minutes...
Installed the plugin &#39;vagrant-aws (0.6.0)&#39;!
</pre></div>
</div>
<p>You then need to add an aws compatible box. I found this box on the vagrant-aws plugin github repository:</p>
<blockquote>
<div><blockquote>
<div>vagrant box add aws <a class="reference external" href="https://github.com/mitchellh/vagrant-aws/raw/master/dummy.box">https://github.com/mitchellh/vagrant-aws/raw/master/dummy.box</a></div></blockquote>
<ol class="arabic simple" start="3">
<li>Fill in your Amazon credentials into the Vagrantfile, then bring up the machine</li>
</ol>
</div></blockquote>
<div class="highlight-python"><div class="highlight"><pre>vagrant up --provider=aws
</pre></div>
</div>
<p>A few important notes:</p>
<blockquote>
<div><ul class="simple">
<li>Make sure you mypem.pem file has the correct permissions:</li>
</ul>
</div></blockquote>
<div class="highlight-python"><div class="highlight"><pre>  chmod 400 ~/.ssh/myfile.pem

* Many times you will not be able to connect to your machine because the security group input/output is too stringent. Make sure to open ports to allow the default psiturk port to come through (22362) as well as SSH.
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="i-want-to-view-or-test-available-experiments">
<h2>I want to view or test available experiments<a class="headerlink" href="#i-want-to-view-or-test-available-experiments" title="Permalink to this headline">¶</a></h2>
<p>We provide static versions of all experiments, along with meta-data, in our <a class="reference external" href="http://expfactory.github.io/expfactory-experiments">expfactory-experiments</a> github pages.</p>
</div>
<div class="section" id="i-want-to-contribute-an-experiment">
<h2>I want to contribute an experiment<a class="headerlink" href="#i-want-to-contribute-an-experiment" title="Permalink to this headline">¶</a></h2>
<p>All of the experiments that can be selected from <a class="reference external" href="http://www.github.com/expfactory/expfactory-experiments">http://www.github.com/expfactory/expfactory-experiments</a> can be selected to include in a battery, and you can contribute an experiment.</p>
<p>All of the experiments that can be selected from <a class="reference external" href="http://www.github.com/expfactory/expfactory-experiments">http://www.github.com/expfactory/expfactory-experiments</a> can be selected to include in a battery, and you can contribute an experiment by submitting a PR to the repo to add a folder with your experiment. More complete details about the format of the config.json file that is required to describe the experiment will come soon.
For now, use the other experiments as example.</p>
</div>
<div class="section" id="i-want-to-learn-about-the-expfactory-python-functions">
<h2>I want to learn about the expfactory-python functions<a class="headerlink" href="#i-want-to-learn-about-the-expfactory-python-functions" title="Permalink to this headline">¶</a></h2>
<p>The generation of the batteries, along with experiment validation, and virtual machine deployment, are controlled by the expfactory-python functions. You can see complete function documentation under <a class="reference internal" href="py-modindex.html"><span>Module Index</span></a>, and we welcome any contributions to the code base via Github pull requests (PRs) or <a class="reference external" href="http://www.github.com/expfactory/expfactory-python/issues">isses</a>.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="integrations.html" class="btn btn-neutral float-right" title="Integrations" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="expfactory.html" class="btn btn-neutral" title="expfactory package" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Poldracklab, Stanford University.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>